{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8">
    <div class="bg-white rounded-lg shadow-xl p-4 sm:p-6">
        <h1 class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-800 mb-4 sm:mb-6">My Subscriptions</h1>
        
        {% if subscriptions %}
        <div class="space-y-3">
            {% for subscription in subscriptions %}
            <div class="p-3 sm:p-4 border rounded-lg hover:shadow-md transition-shadow duration-200">
                <div class="flex flex-col space-y-3">
                    <div>
                        <h3 class="text-base sm:text-lg font-semibold text-gray-800">{{ subscription.subscription.name }}</h3>
                        <p class="text-gray-600 mt-1 text-xs sm:text-sm">
                            <span class="font-medium">Library:</span> {{ subscription.subscription.library.venue_name }}
                        </p>
                    </div>
                    <div class="space-y-1">
                        <div class="grid grid-cols-2 gap-2">
                            <p class="text-gray-600 text-xs sm:text-sm">
                                <span class="font-medium">Start:</span> {{ subscription.start_date|date:"F d, Y" }}
                            </p>
                            <p class="text-gray-600 text-xs sm:text-sm">
                                <span class="font-medium">End:</span> {{ subscription.end_date|date:"F d, Y" }}
                            </p>
                        </div>
                        <p class="text-gray-600 text-xs sm:text-sm">
                            <span class="font-medium">Transaction ID:</span> 
                            {% if subscription.latest_transaction %}
                                {{ subscription.latest_transaction.transaction_id }}
                            {% else %}
                                N/A
                            {% endif %}
                        </p>
                        <br>

                        <div class="flex justify-between items-center">
                            <div class="flex items-center space-x-2">
                                <p class="text-gray-600 text-s font-medium">Status:</p>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-{{ subscription.payment_status.color }}-50 text-{{ subscription.payment_status.color }}-700">
                                    {{ subscription.payment_status.status|default:"N/A" }}
                                </span>
                            </div>
                            <p class="text-gray-800 font-bold text-base sm:text-lg">
                                â‚¹{{ subscription.cost }}
                            </p>
                        </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-4 sm:py-6">
            <p class="text-gray-600 text-sm sm:text-base">You don't have any subscriptions yet.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}