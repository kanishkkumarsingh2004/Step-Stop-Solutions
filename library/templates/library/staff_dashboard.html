{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-7xl font-inter">
    <h1 class="text-4xl font-bold text-gray-900 mb-2">Staff Dashboard</h1>
    <p class="text-lg text-gray-500 mb-8">{{ library.venue_name }}</p>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">
        <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 transition-transform transform hover:scale-105">
            <h3 class="text-gray-500 text-sm font-semibold uppercase tracking-wider">Active Users</h3>
            <p class="text-4xl font-bold text-gray-900 mt-2">{{ active_users_count }}</p>
        </div>
        <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 transition-transform transform hover:scale-105">
            <h3 class="text-gray-500 text-sm font-semibold uppercase tracking-wider">Today's Attendance</h3>
            <p class="text-4xl font-bold text-gray-900 mt-2">{{ todays_attendance_count }}</p>
        </div>
        <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 transition-transform transform hover:scale-105">
            <h3 class="text-gray-500 text-sm font-semibold uppercase tracking-wider">Active Subscriptions</h3>
            <p class="text-4xl font-bold text-gray-900 mt-2">{{ active_subscriptions_count }}</p>
        </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {# Define a consistent neon color. You can change `sky-500` to `fuchsia-500`, `lime-500`, etc., for different neon hues #}
        {% with neon_color_class="text-sky-500" neon_border_class="border-sky-500" neon_shadow_class="hover:drop-shadow-[0_0_8px_rgba(14,165,233,0.7)]" %}
        
        {% if 'manage_users' in staff_permissions %}
        <a href="{% url 'manage_users' library.id %}" class="bg-white border-2 {{ neon_border_class }} {{ neon_color_class }} p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center text-center space-y-2 transition-all duration-300 transform hover:-translate-y-1 {{ neon_shadow_class }}">
            <i class="bi bi-people-fill text-4xl"></i>
            <span class="font-semibold text-lg">Manage Users</span>
        </a>
        {% endif %}
        
        {% if 'nfc_add_user' in staff_permissions %}
        <a href="{% url 'nfc_add_user_page' library.id %}" class="bg-white border-2 {{ neon_border_class }} {{ neon_color_class }} p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center text-center space-y-2 transition-all duration-300 transform hover:-translate-y-1 {{ neon_shadow_class }}">
            <i class="bi bi-credit-card text-4xl"></i>
            <span class="font-semibold text-lg">Add User via NFC</span>
        </a>
        {% endif %}
        
        {% if 'attendance' in staff_permissions %}
        <a href="{% url 'attendance_page' library.id %}" class="bg-white border-2 {{ neon_border_class }} {{ neon_color_class }} p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center text-center space-y-2 transition-all duration-300 transform hover:-translate-y-1 {{ neon_shadow_class }}">
            <i class="bi bi-clipboard-data text-4xl"></i>
            <span class="font-semibold text-lg">Attendance</span>
        </a>
        {% endif %}
        
        {% if 'view_vendor_details' in staff_permissions %}
        <a href="{% url 'library_details' library.id %}" class="bg-white border-2 {{ neon_border_class }} {{ neon_color_class }} p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center text-center space-y-2 transition-all duration-300 transform hover:-translate-y-1 {{ neon_shadow_class }}">
            <i class="bi bi-building text-4xl"></i>
            <span class="font-semibold text-lg">Vendor Details</span>
        </a>
        {% endif %}
        
        {% if 'view_expenses' in staff_permissions %}
        <a href="{% url 'expense_dashboard' library.id %}" class="bg-white border-2 {{ neon_border_class }} {{ neon_color_class }} p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center text-center space-y-2 transition-all duration-300 transform hover:-translate-y-1 {{ neon_shadow_class }}">
            <i class="bi bi-cash-stack text-4xl"></i>
            <span class="font-semibold text-lg">View Expenses</span>
        </a>
        {% endif %}
        
        {% if 'view_all_attendance' in staff_permissions %}
        <a href="{% url 'all_attendance' library.id %}" class="bg-white border-2 {{ neon_border_class }} {{ neon_color_class }} p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center text-center space-y-2 transition-all duration-300 transform hover:-translate-y-1 {{ neon_shadow_class }}">
            <i class="bi bi-list-check text-4xl"></i>
            <span class="font-semibold text-lg">All Attendance</span>
        </a>
        {% endif %}
        
        {% if 'verify_payments' in staff_permissions %}
        <a href="{% url 'verify_payments' library.id %}" class="bg-white border-2 {{ neon_border_class }} {{ neon_color_class }} p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center text-center space-y-2 transition-all duration-300 transform hover:-translate-y-1 {{ neon_shadow_class }}">
            <i class="bi bi-check-circle text-4xl"></i>
            <span class="font-semibold text-lg">Verify Payments</span>
        </a>
        {% endif %}

        {% endwith %}
    </div>
</div>
{% endblock %}